{"metadata":{},"options":{"plugins":[{"key":"base$0$0","visitor":{"Program":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"generateLetDeclarations":true,"enforceStrictMode":false}},{"key":"transform-meteor-dynamic-import","visitor":{"_exploded":{},"_verified":{},"CallExpression":{"enter":[null]}},"options":{}},{"key":"base$0$2","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{}},{"key":"base$0$3","visitor":{"Program":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"allowTopLevelThis":true,"strictMode":false,"loose":true}},{"key":"base$0$0$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$1","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$2","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$3","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$4","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$5","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$6","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$7","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$8","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$9","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$10","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$11","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$12","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$13","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$14","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$15","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"base$0$0$16","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]}},"options":{}},{"key":"base$0$0$17","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$18","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$19","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"base$0$0$20","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$21","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]},"ImportDeclaration":{"enter":[null,null]},"ClassProperty":{"enter":[null]},"ClassPrivateProperty":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"TypeCastExpression":{"enter":[null,null]},"CallExpression":{"enter":[null]},"OptionalCallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"ImportSpecifier":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"AnyTypeAnnotation":{"enter":[null]},"ArrayTypeAnnotation":{"enter":[null]},"BooleanTypeAnnotation":{"enter":[null]},"BooleanLiteralTypeAnnotation":{"enter":[null]},"NullLiteralTypeAnnotation":{"enter":[null]},"ClassImplements":{"enter":[null]},"DeclareClass":{"enter":[null]},"DeclareFunction":{"enter":[null]},"DeclareInterface":{"enter":[null]},"DeclareModule":{"enter":[null]},"DeclareModuleExports":{"enter":[null]},"DeclareTypeAlias":{"enter":[null]},"DeclareOpaqueType":{"enter":[null]},"DeclareVariable":{"enter":[null]},"DeclareExportDeclaration":{"enter":[null]},"DeclareExportAllDeclaration":{"enter":[null]},"DeclaredPredicate":{"enter":[null]},"ExistsTypeAnnotation":{"enter":[null]},"FunctionTypeAnnotation":{"enter":[null]},"FunctionTypeParam":{"enter":[null]},"GenericTypeAnnotation":{"enter":[null]},"InferredPredicate":{"enter":[null]},"InterfaceExtends":{"enter":[null]},"InterfaceDeclaration":{"enter":[null]},"InterfaceTypeAnnotation":{"enter":[null]},"IntersectionTypeAnnotation":{"enter":[null]},"MixedTypeAnnotation":{"enter":[null]},"EmptyTypeAnnotation":{"enter":[null]},"NullableTypeAnnotation":{"enter":[null]},"NumberLiteralTypeAnnotation":{"enter":[null]},"NumberTypeAnnotation":{"enter":[null]},"ObjectTypeAnnotation":{"enter":[null]},"ObjectTypeInternalSlot":{"enter":[null]},"ObjectTypeCallProperty":{"enter":[null]},"ObjectTypeIndexer":{"enter":[null]},"ObjectTypeProperty":{"enter":[null]},"ObjectTypeSpreadProperty":{"enter":[null]},"OpaqueType":{"enter":[null]},"QualifiedTypeIdentifier":{"enter":[null]},"StringLiteralTypeAnnotation":{"enter":[null]},"StringTypeAnnotation":{"enter":[null]},"ThisTypeAnnotation":{"enter":[null]},"TupleTypeAnnotation":{"enter":[null]},"TypeofTypeAnnotation":{"enter":[null]},"TypeAlias":{"enter":[null]},"TypeAnnotation":{"enter":[null]},"TypeParameter":{"enter":[null]},"TypeParameterDeclaration":{"enter":[null]},"TypeParameterInstantiation":{"enter":[null]},"UnionTypeAnnotation":{"enter":[null]},"Variance":{"enter":[null]},"VoidTypeAnnotation":{"enter":[null]},"ExportAllDeclaration":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]}},"options":{}},{"key":"base$0$0$22","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0$23","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]}},"options":{}}],"presets":[],"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/bona/Desktop/my-project/App1.8/node_modules/vue-pdf-syl/src/lib/vue-pdf-syl.vue","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","dynamicImport",["flow",{}],"asyncGenerators","objectRestSpread","objectRestSpread",["flow",{}],"asyncGenerators"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"strictMode":false},"sourceFileName":"/home/bona/Desktop/my-project/App1.8/node_modules/vue-pdf-syl/src/lib/vue-pdf-syl.vue","filename":"/home/bona/Desktop/my-project/App1.8/node_modules/vue-pdf-syl/src/lib/vue-pdf-syl.vue","passPerPreset":false,"envName":"development","cwd":"/home/bona/Desktop/my-project/App1.8","root":"/home/bona/Desktop/my-project/App1.8","generatorOpts":{"filename":"/home/bona/Desktop/my-project/App1.8/node_modules/vue-pdf-syl/src/lib/vue-pdf-syl.vue","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"/home/bona/Desktop/my-project/App1.8/node_modules/vue-pdf-syl/src/lib/vue-pdf-syl.vue"}},"code":"var PDFJS;\nmodule.link(\"pdfjs-dist\", {\n  \"default\": function (v) {\n    PDFJS = v;\n  }\n}, 0);\nvar TextLayerBuilder;\nmodule.link(\"pdfjs-dist/web/pdf_viewer\", {\n  TextLayerBuilder: function (v) {\n    TextLayerBuilder = v;\n  }\n}, 1);\nmodule.link(\"pdfjs-dist/web/pdf_viewer.css\");\nmodule.exportDefault({\n  name: 'vuePdfSyl',\n  props: ['pdfUrl', 'viewHeight'],\n  data: function () {\n    return {\n      totals: [],\n      pageNo: 1,\n      viewH: 0,\n      scrollbar: '',\n      contentWidth: ''\n    };\n  },\n  mounted: function () {\n    this.getMainContentWidth();\n    this.renderPdf(this.pdfUrl);\n  },\n  methods: {\n    getMainContentWidth: function () {\n      this.scrollbar = this.$refs.mainContent;\n      var width = window.getComputedStyle(this.scrollbar).width;\n      this.contentWidth = parseInt(width);\n    },\n    renderPdf: function (pdfUrl) {\n      var _this = this;\n\n      PDFJS.workerSrc = require('pdfjs-dist/build/pdf.worker.min');\n      PDFJS.getDocument(pdfUrl).then(function (pdf) {\n        var totalPage = pdf.numPages;\n        var idName = 'canvas-pdf-';\n\n        _this.createCanvas(totalPage, idName);\n\n        var _loop = function (i) {\n          pdf.getPage(i).then(function (page) {\n            var pageDiv = document.getElementById(\"page-\" + i);\n            var viewportFirst = page.getViewport(1);\n            var scale = _this.contentWidth / viewportFirst.width;\n            var viewport = page.getViewport(scale);\n            var canvas = document.getElementById(idName + i);\n            var context = canvas.getContext('2d');\n            canvas.height = viewport.height;\n            canvas.width = viewport.width;\n            _this.viewH = viewport.height;\n            var renderContext = {\n              canvasContext: context,\n              viewport: viewport\n            };\n            page.render(renderContext).then(function () {\n              return page.getTextContent();\n            }).then(function (textContent) {\n              // 创建文本图层div\n              var textLayerDiv = document.createElement('div');\n              textLayerDiv.setAttribute('class', 'textLayer'); // 将文本图层div添加至每页pdf的div中\n\n              pageDiv.appendChild(textLayerDiv); // 创建新的TextLayerBuilder实例\n\n              var textLayer = new TextLayerBuilder({\n                textLayerDiv: textLayerDiv,\n                pageIndex: page.pageIndex,\n                viewport: viewport\n              });\n              textLayer.setTextContent(textContent);\n              textLayer.render();\n            });\n          });\n        };\n\n        for (var i = 1; i <= totalPage; i++) {\n          _loop(i);\n        }\n      });\n    },\n    createCanvas: function (totalPages) {\n      for (var i = 1; i <= totalPages; i++) {\n        this.totals.push(i);\n      }\n    },\n\n    /**\n     * 分页\n     */\n    scrollfun: function (e) {\n      var scrollTop = e.target.scrollTop;\n\n      if (scrollTop === 0) {\n        this.pageNo = 1;\n      } else {\n        this.pageNo = Math.ceil((scrollTop + 15) / this.viewH);\n      }\n    },\n\n    /**\n     * 上一页\n     */\n    pageUp: function () {\n      var totalPages = this.totals.length;\n\n      if (this.pageNo > 0) {\n        this.scrollbar.scrollTop = (this.pageNo - 2) * (this.scrollbar.scrollHeight / totalPages);\n      }\n    },\n\n    /**\n     * 下一页\n     */\n    pageDown: function () {\n      var totalPages = this.totals.length;\n\n      if (this.pageNo < totalPages) {\n        this.scrollbar.scrollTop = this.pageNo * (this.scrollbar.scrollHeight / totalPages);\n      }\n    }\n  }\n});","map":{"version":3,"sources":["/home/bona/Desktop/my-project/App1.8/node_modules/vue-pdf-syl/src/lib/vue-pdf-syl.vue"],"names":["PDFJS","module","link","v","TextLayerBuilder","exportDefault","name","props","data","totals","pageNo","viewH","scrollbar","contentWidth","mounted","getMainContentWidth","renderPdf","pdfUrl","methods","$refs","mainContent","width","window","getComputedStyle","parseInt","workerSrc","require","getDocument","then","pdf","totalPage","numPages","idName","createCanvas","i","getPage","page","pageDiv","document","getElementById","viewportFirst","getViewport","scale","viewport","canvas","context","getContext","height","renderContext","canvasContext","render","getTextContent","textContent","textLayerDiv","createElement","setAttribute","appendChild","textLayer","pageIndex","setTextContent","totalPages","push","scrollfun","e","scrollTop","target","Math","ceil","pageUp","length","scrollHeight","pageDown"],"mappings":"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","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport PDFJS from 'pdfjs-dist'\nimport { TextLayerBuilder } from 'pdfjs-dist/web/pdf_viewer'\nimport 'pdfjs-dist/web/pdf_viewer.css'\n\nexport default {\n  name: 'vuePdfSyl',\n  props: ['pdfUrl', 'viewHeight'],\n  data () {\n    return {\n      totals: [],\n      pageNo: 1,\n      viewH: 0,\n      scrollbar: '',\n      contentWidth: ''\n    }\n  },\n  mounted () {\n    this.getMainContentWidth()\n    this.renderPdf(this.pdfUrl)\n  },\n  methods: {\n    getMainContentWidth () {\n      this.scrollbar = this.$refs.mainContent\n      let width = window.getComputedStyle(this.scrollbar).width\n      this.contentWidth = parseInt(width)\n    },\n    renderPdf (pdfUrl) {\n      PDFJS.workerSrc = require('pdfjs-dist/build/pdf.worker.min')\n      PDFJS.getDocument(pdfUrl).then(pdf => {\n        let totalPage = pdf.numPages\n        let idName = 'canvas-pdf-'\n        this.createCanvas(totalPage, idName)\n        for (let i = 1; i <= totalPage; i++) {\n          pdf.getPage(i).then((page) => {\n            let pageDiv = document.getElementById(`page-${i}`)\n            let viewportFirst = page.getViewport(1)\n            let scale = this.contentWidth / viewportFirst.width\n            let viewport = page.getViewport(scale)\n            let canvas = document.getElementById(idName + i)\n            let context = canvas.getContext('2d')\n            canvas.height = viewport.height\n            canvas.width = viewport.width\n            this.viewH = viewport.height\n            let renderContext = {\n              canvasContext: context,\n              viewport\n            }\n            page.render(renderContext).then(() => {\n              return page.getTextContent()\n            }).then((textContent) => {\n              // 创建文本图层div\n              const textLayerDiv = document.createElement('div')\n              textLayerDiv.setAttribute('class', 'textLayer')\n              // 将文本图层div添加至每页pdf的div中\n              pageDiv.appendChild(textLayerDiv)\n              // 创建新的TextLayerBuilder实例\n              let textLayer = new TextLayerBuilder({\n                textLayerDiv: textLayerDiv,\n                pageIndex: page.pageIndex,\n                viewport: viewport\n              })\n              textLayer.setTextContent(textContent)\n              textLayer.render()\n            })\n          })\n        }\n      })\n    },\n    createCanvas (totalPages) {\n      for (let i = 1; i <= totalPages; i++) {\n        this.totals.push(i)\n      }\n    },\n    /**\n     * 分页\n     */\n    scrollfun (e) {\n      let scrollTop = e.target.scrollTop\n      if (scrollTop === 0) {\n        this.pageNo = 1\n      } else {\n        this.pageNo = Math.ceil((scrollTop + 15) / this.viewH)\n      }\n    },\n    /**\n     * 上一页\n     */\n    pageUp () {\n      let totalPages = this.totals.length\n      if (this.pageNo > 0) {\n        this.scrollbar.scrollTop = (this.pageNo - 2) * (this.scrollbar.scrollHeight / totalPages)\n      }\n    },\n    /**\n     * 下一页\n     */\n    pageDown () {\n      let totalPages = this.totals.length\n      if (this.pageNo < totalPages) {\n        this.scrollbar.scrollTop = this.pageNo * (this.scrollbar.scrollHeight / totalPages)\n      }\n    }\n  }\n}\n"]},"sourceType":"script","hash":"3e8ab02bcbbcbd0b149d3d13b47bde70fd786fa2"}
